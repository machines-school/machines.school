---
interface Props {
  code: string;
}

const { code } = Astro.props;
---

<div class="mermaid" set:html={code}></div>

<script>
  import mermaid from 'mermaid';
  
  mermaid.initialize({
    startOnLoad: true,
    theme: 'default'
  });
  
  // Re-render when navigating (for view transitions)
  document.addEventListener('astro:page-load', () => {
    mermaid.run();
  });
</script>